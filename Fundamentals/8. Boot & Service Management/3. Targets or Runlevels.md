* * *

**Targets / Runlevels:** `systemctl isolate`, `systemctl get-default`, `systemctl set-default`, `runlevel`, `who -r`, `/etc/systemd/system`, `/etc/inittab`

* * *

* * *

# Linux `systemctl isolate` Command

`systemctl isolate` is a `systemd` command used to switch the system to a different **target** (similar to runlevels in SysVinit). When you isolate a target, `systemd` stops all units not required by the target and starts the units that are needed.

> **Warning:** Using `systemctl isolate` can terminate services and processes that are not part of the target, potentially interrupting users or critical services. It should be used with caution, especially on production systems.

* * *

## Basic Usage

Switch to a specific systemd target:

```bash
sudo systemctl isolate <target_name>
```

- `<target_name>`: The systemd target to switch to.
    
- Requires root privileges.
    

**Example:**

```bash
sudo systemctl isolate multi-user.target
```

This switches the system to `multi-user.target` (non-graphical, multi-user mode).

* * *

## Common Targets

| Target | Description |
| --- | --- |
| `graphical.target` | Full multi-user system with GUI. |
| `multi-user.target` | Multi-user text mode, no GUI. |
| `rescue.target` | Single-user mode, minimal services for recovery. |
| `emergency.target` | Minimal system for emergency recovery; root shell only. |
| `default.target` | The default boot target. |

* * *

## Examples

1.  **Switch to graphical mode (GUI)**

```bash
sudo systemctl isolate graphical.target
```

2.  **Switch to text mode (no GUI)**

```bash
sudo systemctl isolate multi-user.target
```

3.  **Enter rescue mode (single-user, minimal services)**

```bash
sudo systemctl isolate rescue.target
```

4.  **Enter emergency mode (root shell only)**

```bash
sudo systemctl isolate emergency.target
```

* * *

## Precautions

- Isolating a target stops all services not required by the target.
    
- Unsaved work in stopped services may be lost.
    
- Use in a maintenance window or single-user scenario.
    
- Monitor units before and after using:
    

```bash
systemctl list-units --all
```

* * *

## Difference from `systemctl start` and `set-default`

| Command | Purpose |
| --- | --- |
| `systemctl start <unit>` | Starts a single unit without affecting other units. |
| `systemctl isolate <target>` | Stops all units not required by the target, then starts units of the target. |
| `systemctl set-default <target>` | Changes the default boot target; does not immediately switch targets. |

* * *

**Summary:**  
`systemctl isolate` is a powerful command for switching between targets (like runlevels). It is useful for system recovery, maintenance, or switching between graphical and text modes, but must be used with caution because it stops all services not required by the target.

* * *

* * *

# Linux `systemctl get-default` and `systemctl set-default` Commands Guide

`systemctl get-default` and `systemctl set-default` are `systemd` commands used to view and change the default system target (similar to runlevels in SysVinit) that the system boots into.

* * *

## systemctl get-default

Displays the default target that the system will boot into.

### Usage

```bash
systemctl get-default
```

**Example Output:**

```
graphical.target
```

This indicates that the system boots into the graphical interface by default.

* * *

## systemctl set-default

Changes the default target for system boot. This affects all future boots until changed again.

### Usage

```bash
sudo systemctl set-default <target_name>
```

- `<target_name>`: The target you want to set as default.
    
- Requires root privileges.
    

**Example:**

```bash
sudo systemctl set-default multi-user.target
```

This sets the system to boot into text mode (non-graphical) by default.

To revert back to graphical mode:

```bash
sudo systemctl set-default graphical.target
```

* * *

## Common Targets

| Target | Description |
| --- | --- |
| `graphical.target` | Full multi-user system with GUI. |
| `multi-user.target` | Multi-user text mode (no GUI). |
| `rescue.target` | Single-user mode for maintenance. |
| `emergency.target` | Minimal system for emergency recovery. |
| `default.target` | Alias for the system's default boot target. |

* * *

## Examples

1.  **Check default boot target**

```bash
systemctl get-default
```

Output might be `graphical.target` or `multi-user.target`.

2.  **Set default boot to multi-user (text mode)**

```bash
sudo systemctl set-default multi-user.target
```

3.  **Set default boot to graphical (GUI)**

```bash
sudo systemctl set-default graphical.target
```

4.  **Verify change**

```bash
systemctl get-default
```

Output should reflect the new default target.

* * *

## Precautions

- Changing the default target affects **all future boots**.
    
- Does not immediately change the current running system. To switch **immediately**, use:
    

```bash
sudo systemctl isolate <target_name>
```

- Ensure critical services are started in the target you set as default.

* * *

## Summary

- `systemctl get-default`: Shows the system's default boot target.
    
- `systemctl set-default <target>`: Changes the system's default boot target.
    
- Use `graphical.target` for GUI and `multi-user.target` for text mode.
    
- Immediate switch without reboot can be done using `systemctl isolate <target>`.
    

* * *

These commands help manage the default boot target efficiently and safely on a `systemd`\-based Linux system.

* * *

* * *

# Linux `Runlevel`

In Linux, **runlevels** are a legacy concept used to define the state of the system and which services are started. Each runlevel represents a different mode of operation. Modern Linux distributions using `systemd` have replaced runlevels with **targets**, but understanding runlevels is still useful for SysVinit-based systems and historical context.

* * *

## What is a Runlevel

- A **runlevel** defines the state of the machine in terms of which services and processes are running.
    
- Runlevels range from **0 to 6**, each representing a specific mode.
    
- Managed traditionally by **SysVinit**.
    

* * *

## Common Runlevels

| Runlevel | Description |
| --- | --- |
| 0   | Halt (shutdown) |
| 1   | Single-user mode (maintenance) |
| 2   | Multi-user, no networking (varies by distro) |
| 3   | Full multi-user mode (text mode, networking) |
| 4   | Undefined / user-definable |
| 5   | Full multi-user mode with GUI (graphical login) |
| 6   | Reboot |

* * *

## Check Current Runlevel

### Using `runlevel` command

```bash
runlevel
```

**Example Output:**

```
N 5
```

- `N` = previous runlevel (N = none)
    
- `5` = current runlevel
    

### Using `who -r`

```bash
who -r
```

Shows the current runlevel and the system boot time.

* * *

## Change Runlevel

### Temporarily Change Runlevel

```bash
sudo init <runlevel_number>
```

**Example:**

```bash
sudo init 3
```

This switches the system to runlevel 3 (multi-user text mode) without rebooting.

### Permanently Change Default Runlevel

- Edit `/etc/inittab` (SysVinit systems):

```
id:5:initdefault:
```

Change the number to the desired default runlevel.

> **Note:** On `systemd` systems, use `systemctl get-default` and `systemctl set-default` instead.

* * *

## Runlevels and Systemd Targets

| Runlevel | Systemd Target Equivalent |
| --- | --- |
| 0   | poweroff.target |
| 1   | rescue.target |
| 2   | multi-user.target |
| 3   | multi-user.target |
| 4   | multi-user.target |
| 5   | graphical.target |
| 6   | reboot.target |

* * *

## Examples

1.  **Check current runlevel**

```bash
runlevel
```

2.  **Switch to text mode (runlevel 3)**

```bash
sudo init 3
```

3.  **Switch to graphical mode (runlevel 5)**

```bash
sudo init 5
```

4.  **View runlevel using who command**

```bash
who -r
```

* * *

**Summary:**

- Runlevels define system states and determine which services start.
    
- Modern `systemd` uses **targets** instead, but runlevel knowledge is useful for legacy systems.
    
- Temporary changes can be made with `init <runlevel>`, permanent defaults are set in `/etc/inittab` or via `systemctl set-default` on systemd.
    

* * *

* * *

# Linux `who -r` Command

The `who -r` command in Linux is used to display the **current runlevel** of the system along with the system's boot time. It is useful for understanding the current state of the system and troubleshooting boot-related issues.

* * *

## Basic Usage

Display the current runlevel:

```bash
who -r
```

* * *

## Command Syntax

```
who -r
```

- `who` : Shows who is logged in.
    
- `-r` : Displays the current runlevel and system boot information.
    

* * *

## Output Explanation

Example output:

```
         run-level 5  2026-01-22 08:45
```

- `run-level 5` : The current system runlevel (5 = graphical multi-user mode).
    
- `2026-01-22 08:45` : The date and time when the system entered this runlevel (usually the boot time).
    

> Note: On modern `systemd` systems, runlevels are mapped to **targets**.

* * *

## Examples

1.  **Check current runlevel**

```bash
who -r
```

Output example:

```
         run-level 3  2026-01-22 09:10
```

2.  **Combine with other commands**  
    Check boot target with `systemctl` and runlevel with `who -r`:

```bash
systemctl get-default
who -r
```

* * *

## Related Commands

- `runlevel` : Another command to display the previous and current runlevel.
    
- `systemctl get-default` : Shows the default systemd target (modern equivalent of default runlevel).
    
- `systemctl isolate <target>` : Switches to a specific target (runlevel equivalent).
    

* * *

**Summary:**  
`who -r` is a simple and quick way to check the **current runlevel** and the **time when the system reached this runlevel**, useful for system state checks and troubleshooting boot issues.

* * *

* * *

# Linux System Files: `/etc/systemd/system` and `/etc/inittab`

In Linux, `/etc/systemd/system` and `/etc/inittab` are important system configuration locations used for managing services and system runlevels. Understanding their purpose helps in managing system startup and services.

* * *

## /etc/systemd/system

- This directory is part of the **systemd** system. It stores **custom unit files** and overrides for systemd-managed services.
    
- **Unit files** define how services, sockets, targets, and other system components behave.
    
- System administrators place custom or modified service files here to override default ones in `/lib/systemd/system/`.
    
- Files here take precedence over system-installed unit files.
    

### Examples

1.  **List all unit files in `/etc/systemd/system`:**

```bash
ls /etc/systemd/system/
```

2.  **Check a custom service:**

```bash
cat /etc/systemd/system/mycustom.service
```

3.  **Reload systemd to apply changes:**

```bash
sudo systemctl daemon-reload
```

* * *

## /etc/inittab

- This file is used by **SysVinit** to configure **default runlevels** and system initialization.
    
- Specifies:
    
    - Default runlevel for system boot.
        
    - What processes to start on specific runlevels.
        
- Example line for default runlevel:
    

```
id:5:initdefault:
```

- On **modern systemd-based systems**, `/etc/inittab` is often **not present or ignored**, replaced by **targets** and `systemctl set-default`.

### Examples

1.  **View default runlevel in `/etc/inittab`:**

```bash
cat /etc/inittab | grep initdefault
```

2.  **Change default runlevel:**

```text
# Edit line in /etc/inittab
id:3:initdefault:   # Set default to multi-user text mode
```

3.  **Restart SysVinit (rare in modern systems):**

```bash
sudo telinit q
```

* * *

## Key Differences

| Feature | /etc/systemd/system | /etc/inittab |
| --- | --- | --- |
| System | systemd | SysVinit |
| Purpose | Store custom unit files and overrides | Configure default runlevel and init processes |
| Modern Use | Primary on modern Linux | Mostly legacy; replaced by systemd targets |
| Apply Changes | `systemctl daemon-reload` | `telinit q` (for re-reading inittab) |

* * *

## Summary

- `/etc/systemd/system` is for **custom systemd unit files** and is actively used in modern Linux systems.
    
- `/etc/inittab` is for **SysVinit configuration**, defining default runlevels and process startup, mostly legacy now.
    
- Knowing these paths helps manage system startup, services, and runlevels efficiently.
    

* * *

* * *

&nbsp;
