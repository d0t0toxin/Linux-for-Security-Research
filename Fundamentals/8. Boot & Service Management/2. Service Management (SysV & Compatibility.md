* * *

**Service Management (SysV & Compatibility):** `service`, `chkconfig`, `update-rc.d`

* * *

* * *

# Linux `service` Command

The `service` command is used to start, stop, restart, and manage system services on Linux systems. While `systemctl` is the modern utility for `systemd`\-based systems, `service` is still widely used for compatibility with older SysVinit and Upstart services.

* * *

## Basic Usage

The basic syntax of the `service` command is:

```bash
service <service_name> <command>
```

Where `<command>` can be start, stop, restart, reload, or status.

* * *

## Service Management

### Start a Service

```bash
sudo service <service_name> start
```

**Example:**

```bash
sudo service apache2 start
```

Starts the Apache web server.

### Stop a Service

```bash
sudo service <service_name> stop
```

**Example:**

```bash
sudo service apache2 stop
```

Stops the Apache web server.

### Restart a Service

```bash
sudo service <service_name> restart
```

**Example:**

```bash
sudo service apache2 restart
```

Stops and then starts the service.

### Reload a Service

```bash
sudo service <service_name> reload
```

**Example:**

```bash
sudo service apache2 reload
```

Reloads the configuration without stopping the service.

### Check Status of a Service

```bash
service <service_name> status
```

**Example:**

```bash
service apache2 status
```

Shows whether the service is running, stopped, or inactive.

* * *

## List Services

On SysVinit-based systems:

```bash
service --status-all
```

This lists all services with `+` for running, `-` for stopped.

* * *

## Enable/Disable Services

On SysVinit, use `chkconfig`:

```bash
sudo chkconfig <service_name> on
sudo chkconfig <service_name> off
```

On systemd-based systems, prefer `systemctl enable/disable`.

* * *

## Other Useful Options

- `--status-all` : List all services with status indicators.
    
- `help` : Display command help.
    
- Combining with `grep` to filter specific services:
    

```bash
service --status-all | grep apache2
```

* * *

## Examples

Start Nginx:

```bash
sudo service nginx start
```

Restart MySQL:

```bash
sudo service mysql restart
```

Check the status of SSH:

```bash
service ssh status
```

Stop the Apache web server:

```bash
sudo service apache2 stop
```

List all services:

```bash
service --status-all
```

* * *

**Note:** `service` provides backward compatibility for scripts and users transitioning from SysVinit to systemd. On modern Linux systems, `systemctl` is recommended for full functionality.

* * *

* * *

# Linux `chkconfig` Command

`chkconfig` is a command-line utility used to manage the start and stop of system services at different runlevels in SysVinit-based Linux systems. It allows administrators to enable, disable, and query the status of services.

> **Note:** On modern systemd-based systems, `systemctl` is preferred. `chkconfig` is mainly for older distributions or compatibility scripts.

* * *

## Basic Usage

The basic syntax:

```bash
chkconfig [options] <service_name> [on|off]
```

- `on` : Enable the service at default runlevels.
    
- `off` : Disable the service at default runlevels.
    

* * *

## Check Service Status

Check if a service is enabled or disabled:

```bash
chkconfig --list <service_name>
```

**Example:**

```bash
chkconfig --list sshd
```

Output shows runlevels 0-6 and whether the service is on or off in each.

* * *

## Enable a Service

Enable a service to start at boot:

```bash
sudo chkconfig <service_name> on
```

**Example:**

```bash
sudo chkconfig httpd on
```

This ensures the Apache HTTP server starts automatically on system boot.

* * *

## Disable a Service

Disable a service from starting at boot:

```bash
sudo chkconfig <service_name> off
```

**Example:**

```bash
sudo chkconfig httpd off
```

Stops Apache from starting automatically.

* * *

## List All Services

List all services and their current on/off status across runlevels:

```bash
chkconfig --list
```

This shows services along with runlevels 0-6, indicating whether each service is enabled or disabled.

* * *

## Service Configuration by Runlevel

Enable or disable a service for a specific runlevel:

```bash
chkconfig --level <runlevels> <service_name> on|off
```

**Example:** Enable `httpd` only for runlevels 3 and 5:

```bash
sudo chkconfig --level 35 httpd on
```

Disable `sshd` for runlevel 3:

```bash
sudo chkconfig --level 3 sshd off
```

* * *

## Other Useful Options

- `--list` : Show all services and their runlevel configuration.
    
- `--level` : Specify runlevels when enabling/disabling a service.
    
- `--add <service>` : Add a new service to `chkconfig` management.
    
- `--del <service>` : Remove a service from `chkconfig` management.
    
- `--help` : Display help and available options.
    

* * *

## Examples

Enable Apache HTTP server on all default runlevels:

```bash
sudo chkconfig httpd on
```

Disable MySQL on runlevels 3 and 5:

```bash
sudo chkconfig --level 35 mysqld off
```

Check status of SSH service:

```bash
chkconfig --list sshd
```

Add a new service to chkconfig management:

```bash
sudo chkconfig --add myservice
```

Remove a service:

```bash
sudo chkconfig --del myservice
```

* * *

**Note:** `chkconfig` requires root privileges for changing service configurations. It's primarily used in SysVinit-based systems, and for systemd-based distributions, use `systemctl enable/disable` instead.

* * *

* * *

# Linux `update-rc.d` Command

`update-rc.d` is a command-line utility used in Debian-based Linux distributions to install and remove System V style init script links. It allows administrators to enable or disable services at various runlevels, similar to `chkconfig` on Red Hat-based systems.

> **Note:** On modern Debian/Ubuntu systems with `systemd`, `systemctl` is recommended. `update-rc.d` is mainly for compatibility with SysVinit scripts.

* * *

## Basic Usage

The basic syntax of `update-rc.d`:

```bash
sudo update-rc.d <service_name> <command> [options]
```

Commands include `defaults`, `remove`, `disable`, `enable`.

* * *

## Add a Service

Install init script links for a service in default runlevels:

```bash
sudo update-rc.d <service_name> defaults
```

**Example:**

```bash
sudo update-rc.d apache2 defaults
```

This will add symlinks in `/etc/rc[0-6].d/` to start and stop Apache automatically.

* * *

## Remove a Service

Remove all init script links for a service:

```bash
sudo update-rc.d <service_name> remove
```

**Example:**

```bash
sudo update-rc.d apache2 remove
```

This stops the service from starting automatically and removes its symlinks.

* * *

## Enable/Disable Services

### Disable a Service

Prevent a service from starting automatically:

```bash
sudo update-rc.d <service_name> disable
```

**Example:**

```bash
sudo update-rc.d apache2 disable
```

### Enable a Service

Restore automatic start for a service:

```bash
sudo update-rc.d <service_name> enable
```

**Example:**

```bash
sudo update-rc.d apache2 enable
```

* * *

## Listing Services

To see which services are installed and their symlinks:

```bash
ls /etc/rc*.d/ | grep <service_name>
```

**Example:**

```bash
ls /etc/rc*.d/ | grep apache2
```

This will show all start (`S`) and kill (`K`) scripts for the service.

* * *

## Advanced Options

- `defaults <NN> <NN>` : Specify start and stop sequence numbers manually.
    
- `remove` : Remove the service init script links.
    
- `disable` / `enable` : Disable or enable service without removing scripts.
    
- `-f` : Force operation.
    
- `-n` : Show what would be done without actually performing it (dry-run).
    

**Example:**

```bash
sudo update-rc.d apache2 defaults 20 80
```

This sets Apache to start at sequence number 20 and stop at 80.

* * *

## Examples

Add Nginx service with default runlevels:

```bash
sudo update-rc.d nginx defaults
```

Remove MySQL service:

```bash
sudo update-rc.d mysql remove
```

Disable SSH service from starting automatically:

```bash
sudo update-rc.d ssh disable
```

Enable SSH service again:

```bash
sudo update-rc.d ssh enable
```

Check the symlinks for Apache2:

```bash
ls /etc/rc*.d/ | grep apache2
```

Set Apache2 start and stop sequence numbers manually:

```bash
sudo update-rc.d apache2 defaults 25 75
```

* * *

**Note:** Root privileges are required to add, remove, enable, or disable services. For modern systems using `systemd`, prefer `systemctl enable/disable`.

* * *

* * *

&nbsp;
