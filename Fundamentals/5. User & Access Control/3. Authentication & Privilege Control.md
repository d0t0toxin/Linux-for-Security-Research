* * *

**Authentication / Privilege Control:** `passwd`, `su`, `sudo`, `login`, `logout`, `faillog`, `last`, `lastlog`

* * *

* * *

# Linux `passwd` Command

The `passwd` command in Linux is used to manage user passwords. It allows changing passwords for your own account, other users (if you have administrative privileges), and configuring password-related settings.

* * *

## Syntax

```bash
passwd [OPTIONS] [USERNAME]
```

- `USERNAME`: Optional. The username whose password you want to change. If omitted, it changes the password for the current user.

* * *

## Common Options

| Option | Description |
| --- | --- |
| `--help` | Displays help information. |
| `--version` | Displays version information. |
| `-d`, `--delete` | Deletes the user's password (passwordless login). |
| `-e`, `--expire` | Expires the user's password immediately, forcing a change at next login. |
| `-i`, `--inactive DAYS` | Sets number of inactive days after password expiration before account is disabled. |
| `-l`, `--lock` | Locks the user's account by disabling the password. |
| `-u`, `--unlock` | Unlocks a previously locked account. |
| `-S` | Displays the password status for a user. |
| `-n MIN_DAYS` | Minimum number of days between password changes. |
| `-x MAX_DAYS` | Maximum number of days a password is valid. |
| `-w WARN_DAYS` | Number of days before expiration to warn the user. |

* * *

## Examples

### 1\. Change Your Own Password

```bash
passwd
```

- Prompts you to enter your current password and then the new password twice.

### 2\. Change Password for Another User (Admin Only)

```bash
sudo passwd username
```

- Replace `username` with the actual username.

### 3\. Lock a User Account

```bash
sudo passwd -l username
```

- Prevents the user from logging in.

### 4\. Unlock a User Account

```bash
sudo passwd -u username
```

- Restores login ability for a locked account.

### 5\. Delete a User Password

```bash
sudo passwd -d username
```

- Allows the user to log in without a password.

### 6\. Expire a Password Immediately

```bash
sudo passwd -e username
```

- Forces the user to change password at next login.

### 7\. Set Password Expiration Policy

```bash
sudo passwd -n 1 -x 30 -w 5 username
```

- Minimum 1 day between password changes.
    
- Maximum password validity 30 days.
    
- Warn user 5 days before expiration.
    

### 8\. Check Password Status

```bash
sudo passwd -S username
```

- Output example:

```
username P 04/01/2026 0 99999 7 -1
```

Where `P` = Password set, `L` = Locked.

* * *

## Password Aging Options

| Option | Description |
| --- | --- |
| `-n MIN_DAYS` | Minimum days before a password can be changed. |
| `-x MAX_DAYS` | Maximum days a password is valid. |
| `-w WARN_DAYS` | Days before expiration to warn user. |
| `-i INACTIVE_DAYS` | Days after password expires until account is disabled. |
| `-e` | Expire password immediately. |

* * *

## Notes

- Only root or users with sudo privileges can change another userâ€™s password.
    
- Password policies (length, complexity) depend on `/etc/security/pwquality.conf` or PAM configuration.
    
- Locking a password with `-l` does not disable the user; it only disables password authentication.
    

* * *

* * *

# Linux `su` Command

The `su` (substitute user or switch user) command in Linux allows you to run a shell as another user, typically the superuser (root). It is commonly used to gain administrative privileges temporarily.

* * *

## Syntax

```bash
su [OPTIONS] [USER]
```

- `USER`: Optional. The username you want to switch to. If omitted, `su` defaults to root.

* * *

## Common Options

| Option | Description |
| --- | --- |
| `-` or `-l` | Start a login shell as the target user. Loads environment variables and profile settings. |
| `-c COMMAND` | Run a specific command as the target user and exit. |
| `-s SHELL` | Run the specified shell instead of the default shell. |
| `--help` | Display help information. |
| `--version` | Display version information. |

* * *

## Examples

### 1\. Switch to Root User

```bash
su
```

- Prompts for root password.
    
- Gives you a root shell.
    

### 2\. Switch to a Specific User

```bash
su username
```

- Prompts for the specified user's password.
    
- Switches shell to that user.
    

### 3\. Switch to Root User with Login Environment

```bash
su -
```

- Loads root user's environment variables and profile.

### 4\. Run a Single Command as Another User

```bash
su -c 'ls /root' username
```

- Executes the command as `username` and returns to the original user.

### 5\. Use a Specific Shell

```bash
su -s /bin/bash username
```

- Switches to `username` using `/bin/bash` as the shell.

### 6\. Switch to Root Without Loading Environment

```bash
su root
```

- Gives root privileges but keeps current user's environment.

* * *

## Notes

- Only users with knowledge of the target user's password can switch using `su`.
    
- Using `su -` is preferred when performing administrative tasks to ensure the environment is correct.
    
- For security, modern Linux distributions often prefer `sudo` over `su` for privilege escalation.
    
- Exiting the `su` session returns you to your previous user shell.
    

* * *

* * *

# Linux `sudo` Command

The `sudo` (superuser do) command in Linux allows permitted users to execute commands with root or another user's privileges, as defined in the `/etc/sudoers` file. It is the preferred way to perform administrative tasks without switching to the root account.

* * *

## Syntax

```bash
sudo [OPTIONS] COMMAND
```

- `COMMAND`: The command you want to execute with elevated privileges.

* * *

## Common Options

| Option | Description |
| --- | --- |
| `-u USER` | Execute command as specified user (default is root). |
| `-i` | Start a login shell as the target user. |
| `-s` | Start a shell with root privileges. |
| `-l` | List allowed (and forbidden) commands for the user. |
| `-v` | Validate user credentials without running a command. |
| `-k` | Invalidate user's cached credentials, forcing password prompt next time. |
| `--help` | Display help information. |
| `--version` | Display version information. |

* * *

## Examples

### 1\. Run a Command as Root

```bash
sudo apt update
```

- Updates package lists with root privileges.

### 2\. Execute Command as Another User

```bash
sudo -u username whoami
```

- Runs `whoami` as `username`.

### 3\. Start a Root Login Shell

```bash
sudo -i
```

- Opens an interactive root shell with environment variables.

### 4\. Start a Root Shell Keeping Current Environment

```bash
sudo -s
```

- Opens root shell but keeps current user's environment.

### 5\. List Allowed Commands for Current User

```bash
sudo -l
```

- Shows which commands the user can run with `sudo`.

### 6\. Force Password Prompt

```bash
sudo -k
```

- Next `sudo` command will prompt for password, even if recently authenticated.

### 7\. Run a Single Command with Root Privileges

```bash
sudo cp file.txt /root/
```

- Copies file to `/root` directory with root permissions.

* * *

## Sudoers Configuration

- The `/etc/sudoers` file controls which users can run `sudo` and what commands they can execute.
    
- Use `visudo` to safely edit the file:
    

```bash
sudo visudo
```

- Example entry:

```
username ALL=(ALL) ALL
```

- Meaning: `username` can run any command on any host as any user.

* * *

## Notes

- `sudo` logs commands and timestamps to `/var/log/auth.log` for auditing.
    
- Avoid running `sudo` inside scripts unnecessarily; consider using `root` shell if many commands need elevated privileges.
    
- For security, only give `sudo` access to trusted users.
    

* * *

* * *

# Linux `login` Command

The `login` command in Linux is used to initiate a new login session on the system. It is commonly used to switch users from a terminal or console and authenticate using the username and password.

* * *

## Syntax

```bash
login [OPTIONS] [USERNAME]
```

- `USERNAME`: Optional. The username you want to log in as. If omitted, you will be prompted to enter a username.

* * *

## Common Options

| Option | Description |
| --- | --- |
| `-f USERNAME` | Log in without password authentication (typically used for trusted connections). |
| `-p` | Preserve the environment variables of the current session. |
| `--help` | Display help information. |
| `--version` | Display version information. |

* * *

## Examples

### 1\. Log in as a User

```bash
login
```

- Prompts for username and password.
    
- Starts a new login session for the entered user.
    

### 2\. Log in Directly as a Specific User

```bash
login username
```

- Prompts for the password of `username` and starts a session.

### 3\. Login Without Password (Trusted User)

```bash
login -f username
```

- Used when authentication is handled by another trusted mechanism (e.g., NIS or Kerberos).

### 4\. Preserve Environment Variables

```bash
login -p username
```

- Starts a login session for `username` but keeps environment variables from the current session.

* * *

## Notes

- The `login` command is typically used on virtual consoles, terminal sessions, or over serial connections.
    
- On graphical desktop environments, login is usually handled by a display manager (like GDM, LightDM, or SDDM), not the `login` command.
    
- Logging in via `login` starts a fresh shell and session, and any previous shell environment variables are reset unless `-p` is used.
    
- Root access or administrative privileges may be required depending on the user and session context.
    

* * *

* * *

# Linux `logout` Command

The `logout` command in Linux is used to terminate a login session in the shell or console. It effectively closes the current shell, logging the user out of the session.

* * *

## Syntax

```bash
logout
```

- The `logout` command does not take any mandatory arguments.
    
- It is mainly used in login shells.
    

* * *

## Common Options

| Option | Description |
| --- | --- |
| None | The command typically does not require options. |
| `--help` | Displays help information. |
| `--version` | Displays version information. |

* * *

## Examples

### 1\. Logout from Current Shell

```bash
logout
```

- Terminates the current login shell session.

### 2\. Logout from Root Session

```bash
sudo -i
# do some tasks
logout
```

- Logs out from the root shell session and returns to the previous user shell.

### 3\. Logout from Remote SSH Session

```bash
ssh user@host
# work on remote system
logout
```

- Ends the remote SSH session cleanly.

* * *

## Notes

- `logout` only works in login shells. Attempting to run it in a non-login shell may result in an error.
    
- To close terminal emulator windows, the `exit` command can be used as an alternative.
    
- Using `logout` ensures that any processes tied to the login session are terminated properly.
    
- It is commonly used after completing tasks in a secure session, such as SSH or console login.
    

* * *

* * *

# Linux `faillog` Command

The `faillog` command in Linux is used to display or set limits on failed login attempts. It is primarily used for security auditing and controlling user login failures.

* * *

## Syntax

```bash
faillog [OPTIONS] [USERNAME]
```

- `USERNAME`: Optional. Specify a username to view or modify failed login settings for that user.

* * *

## Common Options

| Option | Description |
| --- | --- |
| `-a` | Display all records including those with zero failed login attempts. |
| `-u UID` | Display or modify records for the specified user ID. |
| `-m MAX` | Set maximum number of login attempts before the account is locked. |
| `-l LOGIN` | Limit failed login attempts for the given user. |
| `-t DAYS` | Set the number of days a user is locked out after exceeding failed login attempts. |
| `-r` | Reset failed login count for a user. |
| `--help` | Display help information. |

* * *

## Examples

### 1\. Display All Users' Failed Login Records

```bash
faillog -a
```

- Shows failed login attempts for all users, including users with zero failed attempts.

### 2\. Display Failed Login Records for a Specific User

```bash
faillog -u 1001
```

- Displays failed login attempts for user with UID 1001.

### 3\. Set Maximum Failed Login Attempts

```bash
sudo faillog -u username -m 3
```

- Locks the user account after 3 failed login attempts.

### 4\. Set Lockout Period After Failed Attempts

```bash
sudo faillog -u username -t 7
```

- Locks the user account for 7 days after reaching maximum failed login attempts.

### 5\. Reset Failed Login Count

```bash
sudo faillog -r -u username
```

- Resets the failed login attempt counter for the specified user.

* * *

## Notes

- `faillog` requires root privileges to modify records.
    
- Failed login information is typically stored in `/var/log/faillog`.
    
- This command helps administrators enforce account security policies.
    
- `faillog` complements other security mechanisms like PAM modules (`pam_tally2`) for managing authentication failures.
    

* * *

* * *

# Linux `last` Command

The `last` command in Linux is used to display a list of the most recent user logins on the system. It reads data from the `/var/log/wtmp` file and shows login history.

* * *

## Syntax

```bash
last [OPTIONS] [USERNAME] [TERMINAL] [FROM_HOST]
```

- `USERNAME`: Optional. Show login records for a specific user.
    
- `TERMINAL`: Optional. Show logins from a specific terminal.
    
- `FROM_HOST`: Optional. Show logins from a specific remote host.
    

* * *

## Common Options

| Option | Description |
| --- | --- |
| `-n NUM` | Show only the last NUM entries. |
| `-a` | Display the hostname at the last column. |
| `-d` | Display hostname in IP address format. |
| `-f FILE` | Use a specific file instead of `/var/log/wtmp`. |
| `-i` | Display IP addresses instead of hostnames. |
| `-R` | Suppress the hostname field. |
| `-x` | Show system shutdown entries and run level changes. |
| `--help` | Display help information. |

* * *

## Examples

### 1\. Show Recent Logins

```bash
last
```

- Displays all recent logins.

### 2\. Show Last 5 Logins

```bash
last -n 5
```

- Shows only the last 5 login sessions.

### 3\. Show Logins for a Specific User

```bash
last username
```

- Displays login history of `username`.

### 4\. Show Logins with IP Addresses

```bash
last -i
```

- Displays IP addresses of remote logins.

### 5\. Show Logins from a Specific Host

```bash
last -a hostname
```

- Shows login sessions from the specified host.

### 6\. Show Shutdown and Reboot Entries

```bash
last -x
```

- Displays system shutdowns, reboots, and runlevel changes.

### 7\. Use a Different Log File

```bash
last -f /var/log/wtmp.1
```

- Reads login information from a different wtmp file.

* * *

## Notes

- The `last` command is useful for system auditing, monitoring user activity, and tracking login patterns.
    
- The `/var/log/wtmp` file stores historical login information.
    
- To view the currently logged-in users, use the `who` or `w` commands.
    
- `lastb` can be used to view failed login attempts (reads `/var/log/btmp`).
    

* * *

* * *

# Linux `lastlog` Command

The `lastlog` command in Linux is used to display the most recent login of all users or specific users. It reads information from the `/var/log/lastlog` file and helps administrators monitor user login activity.

* * *

## Syntax

```bash
lastlog [OPTIONS] [USERNAME]
```

- `USERNAME`: Optional. Display the last login for the specified user.

* * *

## Common Options

| Option | Description |
| --- | --- |
| `-u UID` | Display last login for the specified user ID. |
| `-t DAYS` | Show users who have not logged in in the last DAYS days. |
| `-b DAYS` | Show users who have not logged in since DAYS days ago. |
| `-s TIME` | Show users who have logged in since the specified time. |
| `--help` | Display help information. |
| `--version` | Display version information. |

* * *

## Examples

### 1\. Display Last Login for All Users

```bash
lastlog
```

- Shows the most recent login time for all users.

### 2\. Display Last Login for a Specific User

```bash
lastlog -u username
```

- Shows the last login information for `username`.

### 3\. Show Users Who Have Never Logged In

```bash
lastlog -t 0
```

- Displays users who have never logged in.

### 4\. Show Users Not Logged In for More Than 30 Days

```bash
lastlog -t 30
```

- Lists users who have not logged in within the last 30 days.

### 5\. Show Users Logged In Since a Specific Date

```bash
lastlog -s "2026-01-01"
```

- Displays users who have logged in since January 1, 2026.

* * *

## Notes

- The `lastlog` command is useful for auditing and tracking user login activity.
    
- Information is retrieved from `/var/log/lastlog`, which contains records of the last login of each user.
    
- Root privileges may be required to view all users' login information.
    
- Unlike `last`, `lastlog` shows only the last login, not a list of all logins.
    

* * *

* * *

&nbsp;
