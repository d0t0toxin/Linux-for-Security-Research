***
**Debian-based Systems:** `apt`, `apt-get`, `apt-cache`, `apt-key`, `dpkg`
***
***
# `apt` Command in Linux

> **APT (Advanced Package Tool)** is the standard package management system used by Debian-based Linux distributions such as **Ubuntu**, **Linux Mint**, **Pop!\_OS**, and **Debian** itself.

This document is a **complete, practical reference** to the `apt` command with **clear explanations and examples**.

* * *

## Table of Contents

1.  What is APT?
    
2.  APT vs APT-GET vs APTITUDE
    
3.  Basic APT Syntax
    
4.  Package Repositories
    
5.  Updating Package Lists
    
6.  Upgrading Packages
    
7.  Installing Packages
    
8.  Removing Packages
    
9.  Searching & Inspecting Packages
    
10. Managing Repositories
    
11. Cleaning & Maintenance
    
12. Holding Packages
    
13. APT Configuration Files
    
14. Logs & Debugging
    
15. Useful APT Tips
    
16. Common Errors & Fixes
    

* * *

## 1\. What is APT?

APT is a **high-level package manager** that:

- Downloads packages
    
- Resolves dependencies
    
- Installs, upgrades, and removes software
    
- Works on top of `dpkg`
    

APT itself is a **library and set of tools**. The most commonly used CLI tool is:

```bash
apt
```

* * *

## 2\. APT vs APT-GET vs APTITUDE

| Tool | Purpose |
| --- | --- |
| `apt` | Modern, user-friendly CLI (recommended) |
| `apt-get` | Older, scripting-stable interface |
| `aptitude` | TUI + CLI, advanced dependency resolution |

### Recommendation

- **Humans** → `apt`
    
- **Scripts** → `apt-get`
    

* * *

## 3\. Basic APT Syntax

```bash
apt [options] command [package...]
```

Example:

```bash
sudo apt install vim
```

* * *

## 4\. Package Repositories

APT installs software from **repositories**, which are URLs containing:

- Package metadata
    
- `.deb` files
    

### Repository Files

```text
/etc/apt/sources.list
/etc/apt/sources.list.d/*.list
```

* * *

## 5\. Updating Package Lists

### apt update

Fetches the **latest package information** from repositories.

```bash
sudo apt update
```

> Does **NOT** install or upgrade anything.

* * *

## 6\. Upgrading Packages

### apt upgrade

Upgrades installed packages **without removing packages**.

```bash
sudo apt upgrade
```

### apt full-upgrade

Allows removing/installing packages to satisfy dependencies.

```bash
sudo apt full-upgrade
```

### Difference

| Command | Removes packages? |
| --- | --- |
| upgrade | No  |
| full-upgrade | Yes (if needed) |

* * *

## 7\. Installing Packages

### Install a Package

```bash
sudo apt install git
```

### Install Multiple Packages

```bash
sudo apt install curl wget htop
```

### Install Without Confirmation

```bash
sudo apt install -y nginx
```

### Install Specific Version

```bash
sudo apt install nginx=1.18.0-0ubuntu1
```

### Reinstall a Package

```bash
sudo apt install --reinstall openssh-server
```

* * *

## 8\. Removing Packages

### Remove (Keep Config Files)

```bash
sudo apt remove nginx
```

### Purge (Remove Config Files)

```bash
sudo apt purge nginx
```

### Remove Unused Dependencies

```bash
sudo apt autoremove
```

* * *

## 9\. Searching & Inspecting Packages

### Search Packages

```bash
apt search docker
```

### Show Package Info

```bash
apt show docker.io
```

### List Installed Packages

```bash
apt list --installed
```

### List Upgradable Packages

```bash
apt list --upgradable
```

* * *

## 10\. Managing Repositories

### Add Repository (PPA)

```bash
sudo add-apt-repository ppa:git-core/ppa
sudo apt update
```

### Remove Repository

```bash
sudo add-apt-repository --remove ppa:git-core/ppa
```

### Manually Add Repo

```bash
sudo nano /etc/apt/sources.list.d/custom.list
```

Example entry:

```text
deb http://archive.ubuntu.com/ubuntu jammy main
```

* * *

## 11\. Cleaning & Maintenance

### Remove Downloaded Package Files

```bash
sudo apt clean
```

### Remove Old Package Files

```bash
sudo apt autoclean
```

### Fix Broken Dependencies

```bash
sudo apt --fix-broken install
```

* * *

## 12\. Holding Packages

### Prevent Package from Upgrading

```bash
sudo apt-mark hold nginx
```

### Unhold Package

```bash
sudo apt-mark unhold nginx
```

### Show Held Packages

```bash
apt-mark showhold
```

* * *

## 13\. APT Configuration Files

### Main Config Directory

```text
/etc/apt/
```

Important files:

| File | Purpose |
| --- | --- |
| apt.conf | Global config |
| sources.list | Repository list |
| preferences | Pinning |

### Pin Package Version

```text
Package: nginx
Pin: version 1.18*
Pin-Priority: 1001
```

* * *

## 14\. Logs & Debugging

### APT Logs

```text
/var/log/apt/history.log
/var/log/apt/term.log
```

### Simulate Actions

```bash
apt install nginx --simulate
```

### Debug Mode

```bash
apt -o Debug::pkgProblemResolver=yes install nginx
```

* * *

## 15\. Useful APT Tips

### Download Only

```bash
apt download nginx
```

### Show Dependencies

```bash
apt depends nginx
```

### Reverse Dependencies

```bash
apt rdepends nginx
```

### Check Policy

```bash
apt policy nginx
```

* * *

## 16\. Common Errors & Fixes

### "Unable to locate package"

- Run `sudo apt update`
    
- Check repository enabled
    

### "Hash Sum mismatch"

```bash
sudo rm -rf /var/lib/apt/lists/*
sudo apt update
```

### Locked dpkg

```bash
sudo rm /var/lib/dpkg/lock-frontend
sudo dpkg --configure -a
```

* * *

## Summary Cheat Sheet

```bash
apt update
apt upgrade
apt install pkg
apt remove pkg
apt purge pkg
apt autoremove
apt search pkg
apt show pkg
```

* * *

* * *

# `apt-get` Command in Linux

APT-GET is a low-level command-line tool used for handling packages on Debian-based Linux systems. It is part of the Advanced Package Tool (APT) suite and is widely used in scripts and system administration due to its stable interface.

This document provides a comprehensive, professional, and example-driven reference for the `apt-get` command.

* * *

## Table of Contents

1.  Overview of apt-get
    
2.  apt-get vs apt
    
3.  Basic Syntax
    
4.  Package Repositories
    
5.  Updating Package Index
    
6.  Upgrading the System
    
7.  Installing Packages
    
8.  Removing Packages
    
9.  Dependency Management
    
10. Package Querying
    
11. Downloading Packages
    
12. Cleaning and Maintenance
    
13. Configuration Files
    
14. Logs and Troubleshooting
    
15. Non-Interactive Usage
    
16. Common Errors and Solutions
    
17. Command Summary
    

* * *

## 1\. Overview of apt-get

`apt-get` is a command-line tool for retrieving, installing, upgrading, and removing software packages. It works with `.deb` packages and uses `/etc/apt/sources.list` to locate repositories.

It directly interfaces with `dpkg` for package installation and removal.

* * *

## 2\. apt-get vs apt

| Feature | apt-get | apt |
| --- | --- | --- |
| Interface stability | High | Moderate |
| Intended users | Scripts and administrators | End users |
| Output formatting | Plain | Human-friendly |
| Backward compatibility | Guaranteed | Not guaranteed |

Recommendation:

- Use `apt-get` in automation and scripts
    
- Use `apt` for interactive use
    

* * *

## 3\. Basic Syntax

```
apt-get [options] command [package...]
```

Example:

```
sudo apt-get install vim
```

* * *

## 4\. Package Repositories

APT-GET retrieves packages from repositories defined in the following locations:

```
/etc/apt/sources.list
/etc/apt/sources.list.d/*.list
```

Each repository entry specifies the source URL, distribution, and components.

* * *

## 5\. Updating Package Index

### apt-get update

Downloads the latest package metadata from repositories.

```
sudo apt-get update
```

This command must be run before installing or upgrading packages.

* * *

## 6\. Upgrading the System

### Standard Upgrade

Upgrades installed packages without removing existing ones.

```
sudo apt-get upgrade
```

### Distribution Upgrade

Handles changing dependencies and may remove or install packages.

```
sudo apt-get dist-upgrade
```

* * *

## 7\. Installing Packages

### Install a Single Package

```
sudo apt-get install git
```

### Install Multiple Packages

```
sudo apt-get install curl wget htop
```

### Install Without Prompt

```
sudo apt-get install -y nginx
```

### Install Specific Version

```
sudo apt-get install nginx=1.18.0-0ubuntu1
```

### Reinstall a Package

```
sudo apt-get install --reinstall openssh-server
```

* * *

## 8\. Removing Packages

### Remove Package Only

```
sudo apt-get remove nginx
```

### Remove Package and Configuration

```
sudo apt-get purge nginx
```

### Remove Unused Dependencies

```
sudo apt-get autoremove
```

* * *

## 9\. Dependency Management

### Fix Broken Dependencies

```
sudo apt-get -f install
```

### Simulate Dependency Resolution

```
apt-get install nginx --simulate
```

* * *

## 10\. Package Querying

### Search Packages

```
apt-cache search docker
```

### Show Package Details

```
apt-cache show docker.io
```

### Show Dependencies

```
apt-cache depends nginx
```

* * *

## 11\. Downloading Packages

### Download Without Installing

```
apt-get download nginx
```

The package is downloaded to the current directory.

* * *

## 12\. Cleaning and Maintenance

### Remove Cached Packages

```
sudo apt-get clean
```

### Remove Obsolete Cache

```
sudo apt-get autoclean
```

* * *

## 13\. Configuration Files

### Main Configuration Directory

```
/etc/apt/
```

Important files include:

- apt.conf
    
- sources.list
    
- preferences
    

### Package Pinning Example

```
Package: nginx
Pin: version 1.18*
Pin-Priority: 1001
```

* * *

## 14\. Logs and Troubleshooting

### Log Files

```
/var/log/apt/history.log
/var/log/apt/term.log
```

### Debug Mode

```
apt-get -o Debug::pkgProblemResolver=yes install nginx
```

* * *

## 15\. Non-Interactive Usage

Commonly used in scripts with the following options:

```
export DEBIAN_FRONTEND=noninteractive
sudo apt-get install -y package-name
```

This prevents prompts during installation.

* * *

## 16\. Common Errors and Solutions

### Unable to locate package

- Run apt-get update
    
- Verify repository configuration
    

### Package database locked

```
sudo dpkg --configure -a
```

### Hash sum mismatch

```
sudo rm -rf /var/lib/apt/lists/*
sudo apt-get update
```

* * *

## 17\. Command Summary

```
apt-get update
apt-get upgrade
apt-get dist-upgrade
apt-get install package
apt-get remove package
apt-get purge package
apt-get autoremove
apt-get clean
```

* * *

* * *

# `apt-cache` Command in Linux

APT-CACHE is a command-line utility provided by the Advanced Package Tool suite. It is used to query and inspect the local package metadata database maintained by APT. Unlike apt-get or apt, apt-cache does not install or remove software. It is purely an information and analysis tool.

This document provides a comprehensive and professional reference to the apt-cache command with clear explanations and practical examples.

* * *

## Table of Contents

1.  Overview of apt-cache
    
2.  Role of apt-cache in APT Architecture
    
3.  Basic Syntax
    
4.  Updating the Cache Database
    
5.  Searching Packages
    
6.  Viewing Package Information
    
7.  Inspecting Dependencies
    
8.  Reverse Dependencies
    
9.  Policy and Version Selection
    
10. Statistics and Debugging
    
11. Cache Files and Locations
    
12. Common Use Cases
    
13. Common Errors and Solutions
    
14. Command Summary
    

* * *

## 1\. Overview of apt-cache

apt-cache is a low-level tool used to access APT’s internal package cache. It reads metadata that has already been downloaded using apt-get update or apt update.

It is commonly used by system administrators and advanced users to analyze packages, dependencies, and version selection behavior.

* * *

## 2\. Role of apt-cache in APT Architecture

The APT system consists of several components:

- apt-get handles package installation and removal
    
- apt manages user-friendly interaction
    
- apt-cache inspects package metadata
    
- dpkg performs low-level package operations
    

apt-cache never modifies the system state. It only reads from the local cache.

* * *

## 3\. Basic Syntax

```
apt-cache command [options] [package]
```

Example:

```
apt-cache search nginx
```

* * *

## 4\. Updating the Cache Database

apt-cache relies on locally stored metadata. This metadata is updated using:

```
sudo apt-get update
```

If the cache is outdated, apt-cache results may be incomplete or inaccurate.

* * *

## 5\. Searching Packages

### Search by Keyword

```
apt-cache search docker
```

This command searches package names and descriptions for the given keyword.

### Case Sensitivity

Search is case insensitive by default.

* * *

## 6\. Viewing Package Information

### Show Package Details

```
apt-cache show nginx
```

Displays:

- Package name
    
- Version
    
- Architecture
    
- Maintainer
    
- Dependencies
    
- Description
    

### Show Specific Version

```
apt-cache showpkg nginx
```

Provides detailed version and dependency information.

* * *

## 7\. Inspecting Dependencies

### Direct Dependencies

```
apt-cache depends nginx
```

Lists required and recommended dependencies.

### Recursive Dependencies

```
apt-cache depends --recurse nginx
```

Shows the full dependency tree.

* * *

## 8\. Reverse Dependencies

Reverse dependencies are packages that depend on a given package.

```
apt-cache rdepends libc6
```

This is useful before removing shared libraries.

* * *

## 9\. Policy and Version Selection

### View Package Policy

```
apt-cache policy nginx
```

Displays:

- Installed version
    
- Candidate version
    
- Repository priorities
    

### View Global Policy

```
apt-cache policy
```

Shows repository priority configuration.

* * *

## 10\. Statistics and Debugging

### Cache Statistics

```
apt-cache stats
```

Provides information about:

- Number of packages
    
- Dependency relationships
    
- Memory usage
    

### Debugging Dependency Resolution

```
apt-cache depends nginx | less
```

Used for manual analysis of dependency chains.

* * *

## 11\. Cache Files and Locations

APT metadata is stored in the following locations:

```
/var/lib/apt/lists/
/var/cache/apt/
```

apt-cache reads data from these directories.

* * *

## 12\. Common Use Cases

- Inspect package dependencies before installation
    
- Verify available versions across repositories
    
- Identify reverse dependencies before removal
    
- Analyze repository priority and pinning
    
- Debug package conflicts
    

* * *

## 13\. Common Errors and Solutions

### No packages found

- Run apt-get update
    
- Verify repository configuration
    

### Outdated information

- Clear cache and update

```
sudo rm -rf /var/lib/apt/lists/*
sudo apt-get update
```

* * *

## 14\. Command Summary

```
apt-cache search keyword
apt-cache show package
apt-cache showpkg package
apt-cache depends package
apt-cache rdepends package
apt-cache policy package
apt-cache stats
```

* * *

* * *

# `apt-key` Command in Linux

APT-KEY is a legacy command-line utility used to manage trusted cryptographic keys for the Advanced Package Tool system. These keys are used to verify the authenticity and integrity of packages downloaded from software repositories.

Although apt-key is deprecated in modern Linux distributions, it is still encountered in older systems and legacy documentation. Understanding apt-key remains important for maintenance, migration, and troubleshooting tasks.

This document provides a complete and professional reference to the apt-key command with clear explanations and practical examples.

* * *

## Table of Contents

1.  Overview of apt-key
    
2.  Purpose of Repository Signing Keys
    
3.  Deprecation Status and Security Concerns
    
4.  Basic Syntax
    
5.  Listing Trusted Keys
    
6.  Adding Repository Keys
    
7.  Removing Trusted Keys
    
8.  Exporting and Importing Keys
    
9.  Key Storage Locations
    
10. Common Use Cases
    
11. Common Errors and Solutions
    
12. Recommended Modern Alternatives
    
13. Command Summary
    

* * *

## 1\. Overview of apt-key

apt-key is used to manage the list of trusted GPG keys that APT uses to authenticate repositories. If a repository is signed with a trusted key, APT considers its packages valid and safe to install.

apt-key does not manage repositories themselves. It only controls which signing keys are trusted.

* * *

## 2\. Purpose of Repository Signing Keys

APT uses cryptographic signatures to ensure:

- Packages are not modified in transit
    
- Repository metadata is authentic
    
- Updates come from trusted maintainers
    

Each repository signs its metadata using a private key. APT verifies this signature using the corresponding public key stored locally.

* * *

## 3\. Deprecation Status and Security Concerns

apt-key is officially deprecated. Modern APT versions discourage its use due to the following reasons:

- Keys added with apt-key are trusted globally
    
- A compromised key can sign any repository
    
- Poor isolation between repositories
    

Current best practice is to store keys in dedicated keyring files and reference them explicitly in repository definitions.

* * *

## 4\. Basic Syntax

```
apt-key command [options]
```

Most apt-key commands require root privileges.

* * *

## 5\. Listing Trusted Keys

### List All Trusted Keys

```
sudo apt-key list
```

Displays all keys trusted by APT, including their fingerprints and expiration dates.

### Fingerprint Output

Each key includes a unique fingerprint used to identify it when adding or removing keys.

* * *

## 6\. Adding Repository Keys

### Add Key from a File

```
sudo apt-key add repository.key
```

The file must contain a valid ASCII armored or binary GPG public key.

### Add Key from Standard Input

```
curl -fsSL https://example.com/repo.key | sudo apt-key add -
```

The dash indicates reading from standard input.

* * *

## 7\. Removing Trusted Keys

### Remove Key by Fingerprint

```
sudo apt-key del ABCD1234EFGH5678
```

The identifier can be the short key ID or the full fingerprint.

Removing a key immediately invalidates repositories signed with it.

* * *

## 8\. Exporting and Importing Keys

### Export a Trusted Key

```
sudo apt-key export ABCD1234EFGH5678 > repo.key
```

This exports the public key to a file.

### Import an Exported Key

```
sudo apt-key add repo.key
```

* * *

## 9\. Key Storage Locations

Keys managed by apt-key are stored internally by APT in the following locations:

```
/etc/apt/trusted.gpg
/etc/apt/trusted.gpg.d/
```

All keys stored here are trusted system wide.

* * *

## 10\. Common Use Cases

- Adding signing keys for third party repositories on older systems
    
- Inspecting existing trusted keys during audits
    
- Removing obsolete or compromised keys
    
- Migrating systems to modern keyring based methods
    

* * *

## 11\. Common Errors and Solutions

### NO_PUBKEY error

This error indicates that APT cannot verify a repository signature.

Resolution steps:

- Identify the missing key ID from the error message
    
- Add the corresponding public key using apt-key
    
- Run apt-get update again
    

### Invalid keyring

Ensure the key file is valid and not corrupted.

* * *

## 12\. Recommended Modern Alternatives

Instead of apt-key, modern systems should use the following approach:

- Store keys in /usr/share/keyrings
    
- Reference keys using the signed-by option in repository definitions
    

Example repository entry:

```
deb [signed-by=/usr/share/keyrings/example.gpg] https://example.com/repo stable main
```

This limits trust to a specific repository and improves security.

* * *

## 13\. Command Summary

```
apt-key list
apt-key add keyfile
apt-key del keyid
apt-key export keyid
```

* * *

* * *

# `dpkg` Command in Linux

DPKG is the low level package management tool used by Debian based Linux distributions. It is responsible for installing, removing, configuring, and querying individual Debian package files with the .deb extension. Higher level tools such as apt and apt-get rely on dpkg to perform the actual package operations.

This document provides a complete, professional, and example driven reference to the dpkg command.

* * *

## Table of Contents

1.  Overview of dpkg
    
2.  Role of dpkg in the Package Management Stack
    
3.  Basic Syntax
    
4.  Installing Packages
    
5.  Removing Packages
    
6.  Configuring Packages
    
7.  Querying Installed Packages
    
8.  Inspecting Package Files
    
9.  Package Status and Database
    
10. Architecture and Multiarch Support
    
11. Repair and Recovery
    
12. Configuration Files and Directories
    
13. Logs and Auditing
    
14. Common Errors and Solutions
    
15. Command Summary
    

* * *

## 1\. Overview of dpkg

dpkg is the foundational package manager for Debian based systems. It works directly with local package files and maintains the system package database. Unlike apt or apt-get, dpkg does not resolve or download dependencies automatically.

It is primarily used by system administrators for low level package control and recovery operations.

* * *

## 2\. Role of dpkg in the Package Management Stack

The package management stack consists of multiple layers:

- dpkg performs installation and removal of individual packages
    
- apt-get resolves dependencies and downloads packages
    
- apt provides a user friendly interface on top of apt-get
    

All package installations ultimately pass through dpkg.

* * *

## 3\. Basic Syntax

```
dpkg [options] action
```

Most dpkg operations require administrative privileges.

Example:

```
sudo dpkg -i package.deb
```

* * *

## 4\. Installing Packages

### Install a Local Package

```
sudo dpkg -i nginx_1.18.0_amd64.deb
```

This installs the specified package file without resolving dependencies.

### Install Multiple Packages

```
sudo dpkg -i package1.deb package2.deb
```

* * *

## 5\. Removing Packages

### Remove a Package

```
sudo dpkg -r nginx
```

This removes the package but retains configuration files.

### Purge a Package

```
sudo dpkg -P nginx
```

This removes the package along with its configuration files.

* * *

## 6\. Configuring Packages

### Configure an Installed Package

```
sudo dpkg --configure nginx
```

### Configure All Unconfigured Packages

```
sudo dpkg --configure -a
```

This is commonly used after interrupted installations.

* * *

## 7\. Querying Installed Packages

### List All Installed Packages

```
dpkg -l
```

### List a Specific Package

```
dpkg -l nginx
```

### Check if a Package Is Installed

```
dpkg -s nginx
```

* * *

## 8\. Inspecting Package Files

### List Files Installed by a Package

```
dpkg -L nginx
```

### Find Which Package Owns a File

```
dpkg -S /usr/sbin/nginx
```

### View Package Metadata from a File

```
dpkg -I package.deb
```

* * *

## 9\. Package Status and Database

The dpkg database tracks the state of all installed packages.

### Database Location

```
/var/lib/dpkg/
```

Key files include:

- status
    
- available
    

Each package has a recorded state such as installed removed or unpacked.

* * *

## 10\. Architecture and Multiarch Support

### Display System Architecture

```
dpkg --print-architecture
```

### Display Foreign Architectures

```
dpkg --print-foreign-architectures
```

### Add a Foreign Architecture

```
sudo dpkg --add-architecture i386
```

After adding an architecture an apt update is required.

* * *

## 11\. Repair and Recovery

### Fix Broken Installations

```
sudo dpkg --configure -a
```

### Force Installation

```
sudo dpkg -i --force-all package.deb
```

Force options should be used cautiously.

* * *

## 12\. Configuration Files and Directories

### Main Configuration Directory

```
/etc/dpkg/
```

### Important Files

- dpkg.cfg
    
- origins
    

These files control dpkg behavior and package origin information.

* * *

## 13\. Logs and Auditing

### Log File Location

```
/var/log/dpkg.log
```

This file records all dpkg actions including installs removals and upgrades.

* * *

## 14\. Common Errors and Solutions

### Dependency problems prevent configuration

This occurs when required packages are missing.

Resolution:

```
sudo apt-get -f install
```

### Package database locked

Ensure no other package manager is running and then retry.

### Interrupted installation

```
sudo dpkg --configure -a
```

* * *

## 15\. Command Summary

```
dpkg -i package.deb
dpkg -r package
dpkg -P package
dpkg -l
dpkg -s package
dpkg -L package
dpkg -S file
dpkg --configure -a
```

* * *

* * *

&nbsp;
