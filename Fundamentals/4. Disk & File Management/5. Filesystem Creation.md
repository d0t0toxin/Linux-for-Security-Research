* * *

**Filesystem Creation:** `mkfs`, `mkfs.ext4`, `mkfs.xfs`, `mkfs.vfat`

* * *

* * *

# `mkfs` Command in Linux

* * *

## 1\. What is `mkfs`?

`mkfs` stands for **"make filesystem"**. It is used to format a disk partition or device with a specific filesystem.

- Works on **partitions** (like `/dev/sda1`) or disks
    
- Requires root privileges
    
- Often used after creating a partition using `fdisk`, `gdisk`, or `parted`
    

* * *

## 2\. Syntax

```bash
mkfs [options] <filesystem_type> <device>
```

- `<filesystem_type>`: Filesystem type like `ext4`, `xfs`, `vfat`, etc.
    
- `<device>`: Partition or disk, e.g., `/dev/sda1`
    

Example:

```bash
mkfs -t ext4 /dev/sda1
```

* * *

## 3\. Common Options

| Option | Description |
| --- | --- |
| `-t <type>` | Specify filesystem type |
| `-c` | Check device for bad blocks |
| `-f` | Force formatting |
| `-v` | Verbose mode |
| `-L <label>` | Set a volume label |
| `-m <percentage>` | Reserved blocks for root (ext2/ext3/ext4) |
| `-i <bytes>` | Bytes per inode (ext2/ext3/ext4) |
| `-n <number>` | Number of inodes (ext2/ext3/ext4) |
| `-E` | Extended options depending on filesystem |

* * *

## 4\. Supported Filesystem Types

| Filesystem | Usage |
| --- | --- |
| `ext4` | Default Linux filesystem |
| `ext3` | Older Linux filesystem with journaling |
| `ext2` | Legacy filesystem without journaling |
| `xfs` | High-performance filesystem |
| `btrfs` | Advanced: snapshots, compression, subvolumes |
| `vfat` | Compatible with Windows/FAT32 |
| `ntfs` | Windows NTFS support |
| `swap` | Swap space |
| `reiserfs` | Legacy journaling filesystem |

* * *

## 5\. Checking Partitions Before Formatting

```bash
lsblk
sudo fdisk -l
```

* * *

## 6\. Basic Examples

### Format as ext4

```bash
sudo mkfs.ext4 /dev/sdb1
```

### Format with a label

```bash
sudo mkfs.ext4 -L Data /dev/sdb1
```

### Format as xfs

```bash
sudo mkfs.xfs -f /dev/sdb1
```

### Format as FAT32 (vfat)

```bash
sudo mkfs.vfat -F 32 -n USB_DRIVE /dev/sdc1
```

### Format swap space

```bash
sudo mkswap /dev/sdb2
sudo swapon /dev/sdb2
```

* * *

## 7\. Advanced Options (ext4 example)

```bash
sudo mkfs.ext4 -L Data -m 1 -i 2048 /dev/sdb1
```

- `-L Data` → Label “Data”
    
- `-m 1` → Reserve 1% for root
    
- `-i 2048` → 1 inode per 2048 bytes
    

* * *

## 8\. Formatting a Disk in One Step

```bash
# Create partition first (fdisk/gdisk/parted)
sudo mkfs.ext4 /dev/sdb1
sudo mkdir /mnt/data
sudo mount /dev/sdb1 /mnt/data
```

* * *

## 9\. Tips and Warnings

1.  Backup data first — formatting erases all data.
    
2.  Always format partitions, not mounted disks.
    
3.  For removable drives, use `vfat` or `ntfs`.
    
4.  For Linux system partitions, prefer `ext4` or `xfs`.
    
5.  Use `-L` to assign labels for easier mounting.
    
6.  Use `-c` to check for bad blocks on older disks.
    

* * *

## 10\. Example Workflow

```bash
# List disks
lsblk

# Create partition with fdisk
sudo fdisk /dev/sdb
# n → p → 1 → Enter → +20G → w

# Format as ext4 with label
sudo mkfs.ext4 -L Data /dev/sdb1

# Mount partition
sudo mkdir /mnt/data
sudo mount /dev/sdb1 /mnt/data

# Verify
df -h
```

* * *

* * *

# `mkfs` Filesystems in Linux

This guide covers **mkfs.ext4**, **mkfs.xfs**, and **mkfs.vfat** for formatting partitions.

* * *

## 1\. mkfs.ext4

**Description:**  
`ext4` is the default Linux filesystem for most distributions. It is robust, supports large files, and journaling.

**Basic Syntax:**

```bash
sudo mkfs.ext4 [options] <device>
```

**Common Options:**

| Option | Description |
| --- | --- |
| `-L <label>` | Set a volume label |
| `-m <percentage>` | Reserved space for root |
| `-i <bytes>` | Bytes per inode |
| `-c` | Check for bad blocks |
| `-F` | Force formatting |

**Examples:**

```bash
# Format /dev/sdb1 as ext4
sudo mkfs.ext4 /dev/sdb1

# Format with label 'Data'
sudo mkfs.ext4 -L Data /dev/sdb1

# Format with reserved blocks 1% and 1 inode per 2048 bytes
sudo mkfs.ext4 -L Data -m 1 -i 2048 /dev/sdb1
```

* * *

## 2\. mkfs.xfs

**Description:**  
`xfs` is a high-performance filesystem suitable for large files and parallel I/O workloads.

**Basic Syntax:**

```bash
sudo mkfs.xfs [options] <device>
```

**Common Options:**

| Option | Description |
| --- | --- |
| `-f` | Force overwrite if the partition is not empty |
| `-L <label>` | Set filesystem label |
| `-b size=<blocksize>` | Set block size |
| `-d su=<stripeunit>` | Set stripe unit (for RAID) |

**Examples:**

```bash
# Format /dev/sdb1 as xfs
sudo mkfs.xfs /dev/sdb1

# Format with label 'Data'
sudo mkfs.xfs -L Data /dev/sdb1

# Force format if needed
sudo mkfs.xfs -f /dev/sdb1
```

* * *

## 3\. mkfs.vfat

**Description:**  
`vfat` is the FAT32 filesystem, compatible with Linux, Windows, and macOS. Ideal for USB drives.

**Basic Syntax:**

```bash
sudo mkfs.vfat [options] <device>
```

**Common Options:**

| Option | Description |
| --- | --- |
| `-F <size>` | Specify FAT size (16, 32) |
| `-n <label>` | Set volume label |
| `-I` | Force format entire device |

**Examples:**

```bash
# Format /dev/sdc1 as FAT32
sudo mkfs.vfat -F 32 /dev/sdc1

# Format with label 'USB_DRIVE'
sudo mkfs.vfat -F 32 -n USB_DRIVE /dev/sdc1

# Force format entire device
sudo mkfs.vfat -I /dev/sdc
```

* * *

## 4\. General Notes

1.  **Backup important data** — formatting erases all data.
    
2.  **Always format partitions**, not mounted disks.
    
3.  `ext4` is best for Linux OS and general storage.
    
4.  `xfs` is best for large files or servers.
    
5.  `vfat` is ideal for USB drives or cross-platform compatibility.
    
6.  Use `-L` or `-n` to label partitions for easy identification.
    

* * *

## 5\. Example Workflow

```bash
# 1. List disks
lsblk

# 2. Create partition with fdisk/parted
sudo fdisk /dev/sdb
# n → p → 1 → Enter → +20G → w

# 3. Format as ext4
sudo mkfs.ext4 -L Data /dev/sdb1

# 4. Format another partition as xfs
sudo mkfs.xfs -L Backup /dev/sdb2

# 5. Format USB drive as vfat
sudo mkfs.vfat -F 32 -n USB_DRIVE /dev/sdc1

# 6. Mount partitions
sudo mkdir /mnt/data
sudo mount /dev/sdb1 /mnt/data
```

* * *

* * *

&nbsp;
