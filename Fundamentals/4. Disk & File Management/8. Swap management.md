* * *

**Swap Management:** `mkswap`

* * *

* * *

# mkswap Command in Linux

`mkswap` is a Linux command-line utility used to **set up a swap area on a device or partition**. Swap space allows the system to use disk storage as virtual memory, which is helpful when RAM is low.

* * *

## 1\. What is `mkswap`?

- Initializes a **partition or file** for use as swap space.
    
- Swap space can be a **dedicated partition** or a **swap file**.
    
- Must be followed by `swapon` to activate the swap.
    
- Requires **root privileges**.
    

* * *

## 2\. Syntax

```bash
sudo mkswap [options] <device_or_file>
```

- `<device_or_file>`: Partition (e.g., `/dev/sda2`) or file (e.g., `/swapfile`) to be used as swap.

Example:

```bash
sudo mkswap /dev/sda2
```

* * *

## 3\. Common Options

| Option | Description |
| --- | --- |
| `-L <label>` | Set a label for the swap space |
| `-U <UUID>` | Set a specific UUID for the swap |
| `-f` | Force overwrite if device already contains a filesystem |
| `-v` | Verbose mode |
| `-c` | Check device for bad blocks before creating swap |
| `--pagesize <size>` | Specify page size for swap (rarely used) |

* * *

## 4\. Creating Swap on a Partition

```bash
# Create swap on /dev/sda2
sudo mkswap /dev/sda2

# Create swap with label
sudo mkswap -L SwapPartition /dev/sda2
```

## 5\. Creating Swap on a File

```bash
# Create a 1GB swap file
sudo fallocate -l 1G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
```

* * *

## 6\. Activating Swap

After creating swap, activate it with `swapon`:

```bash
sudo swapon /dev/sda2
sudo swapon /swapfile
```

Check active swap:

```bash
swapon --show
free -h
```

* * *

## 7\. Example Workflow

```bash
# 1. List current disks
lsblk

# 2. Create a swap partition /dev/sdb1
sudo fdisk /dev/sdb
# n → p → 1 → Enter → +2G → w

# 3. Initialize swap
sudo mkswap /dev/sdb1

# 4. Activate swap
sudo swapon /dev/sdb1

# 5. Verify
swapon --show
```

For swap file:

```bash
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
swapon --show
```

* * *

## 8\. Making Swap Permanent

Add entry to `/etc/fstab`:

```
/dev/sda2 none swap sw 0 0
# or for swap file
/swapfile none swap sw 0 0
```

* * *

## 9\. Tips and Warnings

1.  **Backup data** before creating swap on a partition.
    
2.  Always set proper permissions for swap files (`600`).
    
3.  Use `swapon --show` or `free -h` to verify.
    
4.  Swap size depends on system RAM and workload.
    
5.  Use `-c` to check for bad blocks on older disks.
    
6.  Removing swap temporarily:
    

```bash
sudo swapoff /dev/sda2
sudo swapoff /swapfile
```

* * *

* * *
