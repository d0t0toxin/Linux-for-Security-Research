***
**One-time Jobs / Monitoring:** `at`, `batch`, `watch`
***
***
# At Command in Linux

## Introduction

The `at` command in Linux is used to schedule commands or scripts to run at a specific time in the future. Unlike cron, which is for recurring tasks, `at` is for one-time execution.

## Installing At

To use the `at` command, it may need to be installed first

```
sudo apt install at  # for Debian/Ubuntu
sudo yum install at  # for CentOS/RHEL
```

## Starting the At Daemon

The at daemon `atd` must be running for scheduled jobs to execute

```
sudo systemctl start atd
sudo systemctl enable atd
sudo systemctl status atd
```

## Basic Syntax

```
at TIME
```

- TIME : the time to execute the command

Common time formats

- HH:MM : specific time today
    
- now + N minutes : N minutes from now
    
- now + N hours : N hours from now
    
- now + N days : N days from now
    
- midnight, noon, teatime : specific keywords
    

## Examples

### Schedule a command at 5 pm today

```
at 17:00
at> /home/user/script.sh
at> <Ctrl-D>
```

### Schedule a command 10 minutes from now

```
at now + 10 minutes
at> /home/user/command.sh
at> <Ctrl-D>
```

### Schedule a command tomorrow at 8 am

```
at 08:00 tomorrow
at> /home/user/morning-task.sh
at> <Ctrl-D>
```

### Schedule a command next Monday at 9 am

```
at 09:00 next Monday
at> /home/user/weekly-task.sh
at> <Ctrl-D>
```

## Managing At Jobs

- `atq` : list pending jobs
    
- `atrm JOB_ID` : remove a scheduled job
    
- `at -c JOB_ID` : view the contents of a job
    

## Example of Managing Jobs

```
atq  # list all jobs
atrm 1  # remove job with ID 1
at -c 2  # show job with ID 2
```

## Tips

- Always use absolute paths in scripts
    
- Environment variables may not be the same as the current shell
    
- Combine with `batch` command to run jobs when system load is low
    

* * *

* * *

# Batch Command in Linux

## Introduction

The `batch` command in Linux is used to schedule commands to run when the system load levels are low. It is similar to the `at` command but is designed to execute jobs when system resources are available.

## Installing Batch

The `batch` command is usually part of the `at` package. If not installed, you can install it

```
sudo apt install at  # Debian/Ubuntu
sudo yum install at  # CentOS/RHEL
```

## Starting the At Daemon

`batch` relies on the `atd` daemon, which must be running

```
sudo systemctl start atd
sudo systemctl enable atd
sudo systemctl status atd
```

## Basic Syntax

```
batch
```

After entering the command, type the command(s) you want to execute and end with Ctrl-D

## Examples

### Schedule a command using batch

```
batch
batch> /home/user/script.sh
batch> <Ctrl-D>
```

### Schedule multiple commands using batch

```
batch
batch> /home/user/script1.sh
batch> /home/user/script2.sh
batch> <Ctrl-D>
```

### Schedule a command using echo and pipe

```
echo "/home/user/script.sh" | batch
```

## Managing Batch Jobs

- `atq` : list all pending `at` and `batch` jobs
    
- `atrm JOB_ID` : remove a scheduled job
    
- `at -c JOB_ID` : view the contents of a job
    

## Example of Managing Batch Jobs

```
atq  # list pending batch and at jobs
atrm 1  # remove job with ID 1
at -c 2  # show job with ID 2
```

## Tips

- Always use absolute paths in scripts
    
- Batch jobs run when system load is low, so execution time may vary
    
- Combine `batch` with logging or email notifications to monitor job completion
    

* * *

* * *

# Watch Command in Linux

## Introduction

The `watch` command in Linux is used to execute a command repeatedly and display its output in the terminal at regular intervals. It is useful for monitoring changes in files, processes, or system statistics.

## Basic Syntax

```
watch [options] command
```

- command : the command to run repeatedly
    
- options : optional flags to modify watch behavior
    

## Common Options

- `-n seconds` : specify the interval in seconds between executions (default is 2 seconds)
    
- `-d` : highlight the differences between successive updates
    
- `-t` : turn off the header showing interval, command, and current time
    
- `-g` : exit when the command output changes
    

## Examples

### Monitor free memory every 2 seconds

```
watch free -h
```

### Monitor disk usage every 5 seconds

```
watch -n 5 df -h
```

### Monitor a process list and highlight changes

```
watch -d ps aux
```

### Monitor a log file for changes

```
watch -n 3 tail -n 10 /var/log/syslog
```

### Run a command and exit when output changes

```
watch -g cat /tmp/status.txt
```

### Turn off the header while monitoring a command

```
watch -t ls -l /home/user
```

## Tips

- Use absolute paths for commands if necessary
    
- Combine watch with grep to filter output
    
- Use Ctrl-C to stop the watch command
    
- Ideal for monitoring system performance, log files, and dynamic data
    

* * *

* * *

&nbsp;
